---

helmDefaults:
  verify: false
  wait: true
  timeout: 120
  historyMax: 5

releases:
  - name: metrics-server
    namespace: {{ requiredEnv "NAMESPACE" }}
    chart: stable/metrics-server
    version: 2.11.1
    values:
      - image:
          repository: k8s.gcr.io/metrics-server/metrics-server
          tag: v0.3.7
          pullPolicy: Always
        args:
          - --kubelet-insecure-tls
          - --v=1
        rbac:
          pspEnabled: true
        podDisruptionBudget:
          enabled: true
          minAvailable: 1
        resources:
          requests:
            memory: "64Mi"
            cpu: "100m"
          limits:
            memory: "64Mi"
            cpu: "100m"
