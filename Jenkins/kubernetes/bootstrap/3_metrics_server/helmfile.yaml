---

helmDefaults:
  verify: false
  wait: true
  timeout: 120
  recreatePods: true

releases:
  - name: metrics-server
    namespace: {{ requiredEnv "NAMESPACE" }}
    chart: stable/metrics-server
    version: 2.8.7
    values:
      - image:
          pullPolicy: Always
        args:
          - --kubelet-insecure-tls
          - --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname
          - --v=2
        hostNetwork:
          enabled: true
        resources:
          requests:
            memory: "64Mi"
            cpu: "100m"
          limits:
            memory: "64Mi"
            cpu: "100m"
        service:
          labels:
            kubernetes.io/cluster-service: "true"
            kubernetes.io/name: metrics-server
