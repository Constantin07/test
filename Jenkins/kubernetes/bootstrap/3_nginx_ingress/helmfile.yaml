---

helmDefaults:
  verify: false
  wait: true
  timeout: 120
  recreatePods: true

releases:
  - name: nginx-ingress
    namespace: {{ requiredEnv "NAMESPACE" }}
    chart: stable/nginx-ingress
    version: 1.8.1
    values:
      - controller:
          image:
            pullPolicy: Always
          hostNetwork: true
          dnsPolicy: ClusterFirstWithHostNet
          reportNodeInternalIp: true
          ingressClass: internal
          config:
            use-forwarded-headers: "true"
          kind: DaemonSet
          publishService:
            enabled: false
          service:
            type: NodePort
            nodePorts:
              http: 30000
              https: 30001
            externalTrafficPolicy: Local
        podSecurityPolicy:
          enabled: true
