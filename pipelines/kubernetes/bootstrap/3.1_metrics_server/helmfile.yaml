---

helmDefaults:
  cleanupOnFail: false
  verify: false
  wait: true
  timeout: 120
  historyMax: 5

repositories:
  - name: bitnami
    url: https://charts.bitnami.com/bitnami

releases:
  - name: metrics-server
    namespace: {{ requiredEnv "NAMESPACE" }}
    createNamespace: false
    chart: bitnami/metrics-server
    version: 5.11.9
    values:
      - image:
          pullPolicy: Always
        commonLabels:
          app.kubernetes.io/version: 0.6.1
        serviceAccount:
          name: metrics-server
        extraArgs:
          kubelet-insecure-tls: true
        apiService:
          create: true
          insecureSkipTLSVerify: true
        resources:
          requests:
            memory: "32Mi"
            cpu: "50m"
          limits:
            memory: "32Mi"
            cpu: "150m"
